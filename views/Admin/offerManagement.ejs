<%-include("adminHeader.ejs")%>


       






<div id="page-wrapper" style="margin-top: 20px;">
    <a href="/add-offer"><div class=" btn btn-success w-10">Add coupon</div></a>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                

                <h1 class="page-header">Offer Management</h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
            <center><div id="message" class="message" style="color: red; font-weight: bold;"><%=message%></div></center>
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" id="">
                                <thead>
                                    <tr>
                                        <th>Offer</th>
                                        <th>Discount On</th>
                                        <th>Discount Value</th>
                                        <th>Start Date</th>
                                        <th>Expire On</th>
                                        <th>Selected Category</th>
                                        <th>Selected Product</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    
                                    <% allOffers.forEach(offer=>{%>

                                    
                                    
                                        <tr>
                                            <td><%=offer.offerName%></td>
                                            <td><%=offer.discountOn%></td>
                                            <td><%=offer.discountValue%>%</td>
                                            <td><%=offer.startDate.toLocaleDateString()%></td>
                                            <td><%=offer.endDate.toLocaleDateString()%></td>
                                            <td><%= offer.selectedCategory?offer.selectedCategory.categoryName:""%></td>
                                            <td><%=offer.selectedProducts? offer.selectedProducts.productName:""%></td>
                                            <td>
                                            <a href="/offer-management/toggle/<%=offer._id%>" title="<%= offer.isActive ? 'Deactivate' : 'Activate' %>">
                                                <%= offer.isActive ? 'Deactivate' : 'Activate' %>
                                            </a></td>
                                            <td>
                                            <a href="/offer-management/edit/<%=offer._id%>">Edit</a>
                                            </td>
                                        </tr>
                                        <%})%>
                                            



                                    
                                </tbody>
                            </table>
                        </div>



        <!-- jQuery -->
        <script src="/js/adminJs/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="/js/adminJs/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="/js/adminJs/metisMenu.min.js"></script>

        <!-- DataTables JavaScript -->
        <script src="/js/adminJs/dataTables/jquery.dataTables.min.js"></script>
        <script src="/js/adminJs/dataTables/dataTables.bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="/js/adminJs/startmin.js"></script>

        <!-- Page-Level Demo Scripts - Tables - Use for reference -->
        <script>
            $(document).ready(function () {
                $('#dataTables-example').DataTable({
                    responsive: true
                });
            });

            var messageElement = document.getElementById('message')
            setTimeout(()=>{
                messageElement.style.display = 'none'
            },3000)

            
        </script>

    </body>

</html>