<%-include("header.ejs")%>

    <section class="bg-light">
        <div class="container">
            <h2>Checkout</h2>

            <div class="row py-3">

                <div class="row">
                    <div class="col-xl-12 col-lg-12 mb-4">

                        <!-- Checkout -->
                        <div class="card shadow-0 border">
                            <div class="p-4">

                                <h5 class="card-title mb-3">Order Details</h5>
                                <hr class="my-4" />

                                <div>

                                </div>
                                <div class="container">
                                    <div class="row justify-content-center g-3">
                                        <% orderDetails.items.forEach(item => {
                                        %>
                                        <div class="card mr-3 border-0 "
                                            style="width: auto; margin-left: 45px;">
                                            <img
                                                src="<%= item.product.image[0] %>"
                                                alt="Product Image"
                                                style="width: 150px; height: 170px;">
                                            <p class="card-text fw-bold"><%=
                                                item.product.productName%></p>
                                            <p class="card-text">Quantity: <%=
                                                item.quantity%></p>
                                        </div>
                                        <% }) %>
                                    </div>
                                </div>

                                <div class="container mt-5 mb-5">
                                    <div
                                        class="row justify-content-center align-items-center">
                                    <%
                                        const statusColors = {
                                        'Delivered': 'bg-success',
                                        'Returned': 'bg-danger',
                                        'Cancelled': 'bg-danger',
                                        'Shipped': 'bg-warning',
                                        'Order Placed': 'bg-warning',
                                        };

                                        const bgColorClass =
                                        statusColors[orderDetails.OrderStatus]
                                        || 'bg-primary';
                                        
                                    %>

                                        <h5
                                            class="<%= bgColorClass %> rounded text-center text-white fw-bold"
                                            style="height: 40px;">
                                            <%= orderDetails.OrderStatus %>
                                        </h5>

                                    </div>
                                </div>

                                <div class="container">
                                    <div class="row">
                                        <div class="col-lg-6 mb-3">
                                            <!-- Default radio -->
                                            <div class="row">
                                                <div
                                                    class="form-check h-100 border rounded-3">
                                                    <div class="p-3">
                                                        <div
                                                            class="d-flex justify-content-center">
                                                            <h3>Delivery Address</h3>
                                                        </div>
                                                        <div
                                                            class="d-flex justify-content-between">
                                                            <p class="mb-2"><%=customer.name%>
                                                                | <%=orderDetails.address.mobile%></p>
                                                        </div>
                                                        <div
                                                            class="d-flex justify-content-between">
                                                            <p class="mb-2"><%=orderDetails.address.houseName%>,
                                                                <%=orderDetails.address.street%>,
                                                                <%=orderDetails.address.city%>,
                                                                <%=orderDetails.address.pincode%>,
                                                                <%=orderDetails.address.state%></p>
                                                        </div>
                                                        <hr />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-6 mb-3">
                                            <!-- Default radio -->
                                            <div class="row">
                                                <div
                                                    class="form-check h-100 border rounded-3">
                                                    <div class="p-3">
                                                        <div
                                                            class="d-flex justify-content-center">
                                                            <h3>Total Order
                                                                Price</h3>
                                                        </div>
                                                        <div
                                                            class="d-flex justify-content-between">
                                                            <p class="mb-2">Total
                                                                :<b> â‚¹<%=orderDetails.totalAmount%></b></p>

                                                        </div>
                                                        <div
                                                            class="d-flex justify-content-between">
                                                            <p
                                                                class="mb-2 bg-secondary text-white"
                                                                style="width: 100%;">Payment
                                                                Method : <%=orderDetails.paymentMethod%></p>
                                                        </div>
                                                        <a href="/generate-invoice/<%=orderDetails._id%>"  target="_blank" rel="noopener noreferrer">Invoice Download</a>

                                                        <hr />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Checkout -->
                        </div>

                    </div>
                </div>
            </section>

<%-include("footer")%>